# VetMediator MCP

![Logo](../imgs/icon.png)

**[ğŸ  é¦–é¡µ](../../README.md)** | **Language / è¯­è¨€**: [English](../en/README.md) | [ä¸­æ–‡](../zh/README.md)

---

> **AI CLIå·¥å…·å®¡æŸ¥åè°ƒå™¨** - æ”¯æŒå¤šå·¥å…·ä»£ç å®¡æŸ¥å·¥ä½œæµçš„MCPæœåŠ¡å™¨
>
> è®©AIä»£ç†ï¼ˆå¦‚Claude Codeï¼‰è°ƒç”¨å…¶ä»–CLIå®¡æŸ¥å·¥å…·ï¼ˆå¦‚Codexã€iFlowç­‰ï¼‰è¿›è¡Œä»£ç äº¤å‰éªŒè¯

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **å¤šå·¥å…·æ”¯æŒ** - æ”¯æŒCodexã€Claudeã€iFlowç­‰ä»»æ„CLIå®¡æŸ¥å·¥å…·
- ğŸ”„ **æ™ºèƒ½åè°ƒ** - AIä»£ç†ç”Ÿæˆä»»åŠ¡â†’CLIå·¥å…·å®¡æŸ¥â†’ç»“æ„åŒ–æŠ¥å‘Š
- ğŸ“Š **å®æ—¶ç›‘æ§** - GUIçª—å£æ˜¾ç¤ºå®¡æŸ¥è¿›åº¦å’Œæ—¥å¿—è¾“å‡º
- ğŸ¯ **é…ç½®ç®¡ç†** - GUIç•Œé¢æŸ¥çœ‹å·¥å…·çŠ¶æ€ã€ä¸€é”®åˆ‡æ¢æ¿€æ´»å·¥å…·
- ğŸ“ **ç»“æ„åŒ–æŠ¥å‘Š** - P0/P1/P2é—®é¢˜åˆ†çº§ï¼Œ7ç»´åº¦è´¨é‡è¯„ä¼°
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ** - UTF-8ç¼–ç ï¼Œæ”¯æŒä¸­æ–‡ã€æ—¥æ–‡ã€emojiç­‰
- ğŸ’¾ **æ™ºèƒ½ç¼“å­˜** - HashéªŒè¯è‡ªåŠ¨ç¼“å­˜è§„åˆ™æ–‡ä»¶ï¼ŒèŠ‚çœTokenæ¶ˆè€—
- ğŸ”§ **è‡ªåŠ¨è¿ç§»** - å…¨å±€é…ç½®è‡ªåŠ¨è¿ç§»åˆ° `~/.vetmediator/` ç›®å½•

---

## ğŸ”Œ MCPå®¢æˆ·ç«¯å…¼å®¹æ€§

**VetMediator MCP** æ˜¯ä¸€ä¸ªæ ‡å‡†çš„MCPï¼ˆModel Context Protocolï¼‰æœåŠ¡å™¨ï¼Œæ”¯æŒæ‰€æœ‰å…¼å®¹MCPåè®®çš„AIå®¢æˆ·ç«¯ï¼š

- âœ… **Claude Code** - Anthropicå®˜æ–¹CLIå·¥å…·
- âœ… **Cursor** - AIä»£ç ç¼–è¾‘å™¨
- âœ… **Codex CLI** - OpenAIä»£ç å·¥å…·
- âœ… å…¶ä»–æ”¯æŒMCPåè®®çš„AIå·¥å…·

**å·¥ä½œåŸç†**ï¼šé€šè¿‡MCPåè®®ï¼Œä»»æ„MCPå®¢æˆ·ç«¯éƒ½å¯ä»¥è°ƒç”¨å…¶ä»–CLIå®¡æŸ¥å·¥å…·ï¼ˆå¦‚Claude Code CLIã€iFlow CLIã€Codex CLIç­‰ï¼‰è¿›è¡Œäº¤å‰éªŒè¯ï¼Œå®ç°"AIå®¡æŸ¥AI"çš„ä»£ç è´¨é‡ä¿éšœã€‚

---

## ğŸ¬ å®Œæ•´å·¥ä½œæµç¨‹

### 1. å‘èµ·å®¡æŸ¥

ç”¨æˆ·é€šè¿‡AIä»£ç†ï¼ˆå¦‚Claude Codeï¼‰è¯·æ±‚ä»£ç å®¡æŸ¥ï¼š

![å‘èµ·å®¡æŸ¥](../imgs/1.png)

*è¾“å…¥è§¦å‘è¯å¦‚"ä½¿ç”¨vetéªŒè¯"ï¼ŒAIä»£ç†å¼€å§‹å‡†å¤‡å®¡æŸ¥ä»»åŠ¡*

### 2. ç”Ÿæˆä»»åŠ¡æ–‡ä»¶

AIä»£ç†æ ¹æ®è§„åˆ™ç”ŸæˆReviewIndex.mdå’Œå¤šä¸ªTask*.mdæ–‡ä»¶ï¼š

![ç”Ÿæˆä»»åŠ¡æ–‡ä»¶](../imgs/3.png)

*åŒ…å«å®Œæ•´çš„ä»»åŠ¡æè¿°ã€ä»£ç å¯¹æ¯”å’Œå®¡æŸ¥è¦æ±‚*

### 3. æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…

ç‚¹å‡»"æŸ¥çœ‹"æŒ‰é’®å¯ä»¥æ‰“å¼€ç”Ÿæˆçš„ä»»åŠ¡æ–‡ä»¶ï¼š

![æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…](../imgs/2.png)

*æ¯æ¬¡å®¡æŸ¥åœ¨VetMediatorSessionsç›®å½•ä¸‹åˆ›å»ºç‹¬ç«‹ä¼šè¯*

### 4. å®æ—¶ç›‘æ§å®¡æŸ¥

MCPå¯åŠ¨CLIå·¥å…·å¹¶æ˜¾ç¤ºå®æ—¶ç›‘æ§çª—å£ï¼š

![å®æ—¶ç›‘æ§](../imgs/4.png)

*800x600çª—å£å®æ—¶æ˜¾ç¤ºå®¡æŸ¥æ—¥å¿—ï¼Œå¯éšæ—¶ä¸­æ­¢*

### 5. ç”Ÿæˆå®¡æŸ¥æŠ¥å‘Š

CLIå·¥å…·å®Œæˆå®¡æŸ¥åç”Ÿæˆç»“æ„åŒ–æŠ¥å‘Šï¼š

![å®¡æŸ¥æŠ¥å‘Š](../imgs/5.png)

*åŒ…å«é—®é¢˜åˆ†çº§ã€å»ºè®®å’Œè´¨é‡è¯„åˆ†*

### 6. å¤„ç†å®¡æŸ¥ç»“æœ

AIä»£ç†è§£ææŠ¥å‘Šå¹¶å†³å®šåç»­åŠ¨ä½œï¼š

![å¤„ç†ç»“æœ](../imgs/6.png)

*æ ¹æ®å®¡æŸ¥ç»“æœé€‰æ‹©ç»§ç»­å®ç°æˆ–ä¿®å¤é—®é¢˜*

---

## ğŸ“š çœŸå®é¡¹ç›®ç¤ºä¾‹

æƒ³çœ‹çœ‹VetMediatoråœ¨çœŸå®é¡¹ç›®ä¸­çš„åº”ç”¨æ•ˆæœï¼Ÿ

ğŸ‘‰ **[æŸ¥çœ‹å®Œæ•´ç¤ºä¾‹ï¼šUnityé¡¹ç›®ä»£ç å®¡æŸ¥](../sample/README.md)**

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†ï¼š
- Claude Codeä½¿ç”¨ultrathinkæ·±åº¦åˆ†æUnityä»£ç 
- ç”Ÿæˆ8ä¸ªè¯¦ç»†çš„é‡æ„ä»»åŠ¡æ–‡ä»¶
- iFlowè¿›è¡Œ310ç§’çš„å…¨é¢å®¡æŸ¥
- å‘ç°å¹¶ä¿®å¤4ä¸ªP0çº§åˆ«å…³é”®BUG
- å®Œæ•´çš„äº¤äº’å¼åé¦ˆæµç¨‹

åŒ…å«18å¼ çœŸå®æˆªå›¾ï¼Œå®Œæ•´å±•ç¤ºä»åˆ†æåˆ°å®¡æŸ¥å®Œæˆçš„å…¨è¿‡ç¨‹ï¼

---

## ğŸ”§ CLIå·¥å…·é…ç½®ç®¡ç†

### æŸ¥çœ‹å·¥å…·çŠ¶æ€

è¾“å…¥"æŸ¥çœ‹CLIå·¥å…·"æ‰“å¼€é…ç½®ç®¡ç†ç•Œé¢ï¼š

![é…ç½®ç®¡ç†ç•Œé¢](../imgs/7.png)

*æŸ¥çœ‹æ‰€æœ‰é…ç½®å·¥å…·çš„å¥åº·çŠ¶æ€å’Œå½“å‰æ¿€æ´»å·¥å…·*

### åˆ‡æ¢CLIå·¥å…·

ç‚¹å‡»å…¶ä»–å·¥å…·çš„"æ¿€æ´»"æŒ‰é’®ï¼š

![æ¿€æ´»æç¤º](../imgs/8.png)

*ç¡®è®¤åç«‹å³ç”Ÿæ•ˆ*

### å®Œæˆåˆ‡æ¢

å·¥å…·åˆ‡æ¢å®Œæˆï¼Œç•Œé¢è‡ªåŠ¨åˆ·æ–°ï¼š

![åˆ‡æ¢å®Œæˆ](../imgs/9.png)

*æ–°å·¥å…·å·²æ¿€æ´»ï¼Œå¯ä»¥ç»§ç»­ç®¡ç†æˆ–å…³é—­çª—å£*

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **Python 3.10+** - [ä¸‹è½½](https://python.org)
- **uvx** - PythonåŒ…è¿è¡Œå™¨ï¼ˆéšuvä¸€èµ·å®‰è£…ï¼‰ï¼š`pip install uv`
- **MCPå…¼å®¹çš„AIä»£ç†** - å¦‚Claude Codeã€Cursorç­‰
- **CLIå®¡æŸ¥å·¥å…·** - å¦‚Codexã€Claude CLIæˆ–iFlowï¼ˆè‡³å°‘å®‰è£…ä¸€ä¸ªï¼‰

### å®‰è£…MCPæœåŠ¡å™¨

**æ–¹å¼ä¸€ï¼šä»Gitä»“åº“å®‰è£…ï¼ˆæ¨èï¼‰**

ğŸ“‹ **æ­¥éª¤1ï¼šå¤åˆ¶MCPé…ç½®åˆ°é¡¹ç›®æ ¹ç›®å½•**

ä»æœ¬ä»“åº“å¤åˆ¶ `rules/.mcp.json` åˆ°ä½ çš„é¡¹ç›®æ ¹ç›®å½•å¹¶å‘½åä¸º `.mcp.json`ï¼š

```json
{
  "mcpServers": {
    "vet-mediator-mcp": {
      "command": "uvx",
      "args": [
        "--from",
        "git+https://gitee.com/ldr123/VetMediatorMCP.git",
        "vet-mediator-mcp"
      ]
    }
  }
}
```

**å›½é™…åŒº**ï¼šå¦‚æœä¸æƒ³ä½¿ç”¨giteeå¯ä»¥ä½¿ç”¨GitHubé•œåƒï¼š
```json
"git+https://github.com/ldr123/VetMediatorMCP.git"
```

ğŸ“‹ **æ­¥éª¤2ï¼šæ·»åŠ VetMediatoré…ç½®åˆ°AIå·¥å…·çš„è§„åˆ™æ–‡ä»¶**

æŸ¥çœ‹æœ¬ä»“åº“çš„ `rules/CLAUDE.md` æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ä½ çš„AIå·¥å…·è§„åˆ™æ–‡ä»¶çš„**å¼€å¤´éƒ¨åˆ†**ã€‚

**ä¸åŒAIå·¥å…·çš„é…ç½®æ–¹å¼**:

| AIå·¥å…· | è§„åˆ™æ–‡ä»¶ | ä½ç½® | è¯´æ˜ |
|--------|---------|------|------|
| **Claude Code** | `CLAUDE.md` | é¡¹ç›®æ ¹ç›®å½• | ç³»ç»Ÿé¢„è®¾ |
| **Cursor** | `*.mdc` | `.cursor/rules/` | å¤šçº§ä¼˜å…ˆçº§ï¼Œè‡ªåŠ¨åŠ è½½ |
| **Codex** | `AGENTS.md` | é¡¹ç›®æ ¹ç›®å½• | æ”¯æŒå…¨å±€ä¸é¡¹ç›®çº§ |
| **iFlow** | `IFLOW.md` | é¡¹ç›®æ ¹ç›®å½• | æ”¯æŒåŒ…å«å…¶ä»–æ–‡ä»¶ |
| **Gemini CLI** | `GEMINI.md` | é¡¹ç›®æ ¹ç›®å½• | æ”¯æŒæ¨¡å—çº§è§„åˆ™ |

**Claude Codeé…ç½®ç¤ºä¾‹**:
- å°† `rules/CLAUDE.md` çš„å†…å®¹å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•çš„ `CLAUDE.md` **å¼€å¤´éƒ¨åˆ†**
- å¦‚æœé¡¹ç›®è¿˜æ²¡æœ‰ `CLAUDE.md` æ–‡ä»¶ï¼Œåˆ›å»ºä¸€ä¸ªå¹¶ç²˜è´´å†…å®¹

**Cursoré…ç½®ç¤ºä¾‹**:
- åœ¨é¡¹ç›®ä¸­åˆ›å»º `.cursor/rules/vetmediator.mdc`
- å°† `rules/CLAUDE.md` çš„å†…å®¹å¤åˆ¶è¿›å»

**Codexé…ç½®ç¤ºä¾‹**:
- å°† `rules/CLAUDE.md` çš„å†…å®¹å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•çš„ `AGENTS.md` **å¼€å¤´éƒ¨åˆ†**

**iFlowé…ç½®ç¤ºä¾‹**:
- å°† `rules/CLAUDE.md` çš„å†…å®¹å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•çš„ `IFLOW.md` **å¼€å¤´éƒ¨åˆ†**

**Gemini CLIé…ç½®ç¤ºä¾‹**:
- å°† `rules/CLAUDE.md` çš„å†…å®¹å¤åˆ¶åˆ°é¡¹ç›®æ ¹ç›®å½•çš„ `GEMINI.md` **å¼€å¤´éƒ¨åˆ†**

**è§„åˆ™å†…å®¹è¯´æ˜**ï¼šAIå·¥å…·é¦–æ¬¡ä½¿ç”¨æ—¶ä¼šé€šè¿‡MCPè‡ªåŠ¨ä¸‹è½½å¹¶ç¼“å­˜å®Œæ•´çš„å®¡æŸ¥è§„åˆ™ï¼ˆçº¦4000 tokensï¼‰ï¼Œåç»­ä½¿ç”¨ç›´æ¥è¯»å–æœ¬åœ°ç¼“å­˜ï¼Œå¤§å¹…èŠ‚çœTokenæ¶ˆè€—ã€‚

**æ–‡ä»¶ä½ç½®æ€»ç»“**:
```
YourProject/
â”œâ”€â”€ .mcp.json                           # MCPæœåŠ¡å™¨é…ç½®
â””â”€â”€ CLAUDE.md (æˆ– AGENTS.md ç­‰)        # AIå·¥å…·è§„åˆ™æ–‡ä»¶ï¼ˆå°†VetMediatoré…ç½®æ·»åŠ åˆ°å¼€å¤´ï¼‰
```

**æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘å®‰è£…**

å…‹éš†ä»“åº“åï¼Œåœ¨`.mcp.json`ä¸­é…ç½®æœ¬åœ°è·¯å¾„ï¼š

```json
{
  "mcpServers": {
    "vet-mediator-mcp": {
      "command": "uv",
      "args": [
        "--directory",
        "D:/Research/vet-mediator-mcp",
        "run",
        "vet-mediator-mcp"
      ]
    }
  }
}
```

### é…ç½®CLIå·¥å…·

åˆ›å»º`.VetMediatorSetting.json`ï¼ˆå¯é€‰ï¼Œä½¿ç”¨é»˜è®¤é…ç½®æ— éœ€æ­¤æ–‡ä»¶ï¼‰ï¼š

```json
{
  "current_cli_tool": "iflow",
  "env_vars": {
    "PYTHONIOENCODING": "utf-8",
    "PYTHONUTF8": "1"
  },
  "cli_presets": {
    "iflow": {
      "executable": "iflow",
      "args": ["-y", "-p"],
      "log_file_name": "iflow.log",
      "install_command": "npm i -g @iflow-ai/iflow-cli"
    },
    "codex": {
      "executable": "codex",
      "args": ["exec", "--skip-git-repo-check"],
      "log_file_name": "codex.log",
      "install_command": "npm install -g @openai/codex"
    },
    "claude": {
      "executable": "claude",
      "args": ["--dangerously-skip-permissions"],
      "log_file_name": "claude.log",
      "install_command": "npm install -g @anthropic-ai/claude-code"
    }
  }
}
```

### å®‰è£…CLIå®¡æŸ¥å·¥å…·

VetMediatoréœ€è¦è‡³å°‘ä¸€ä¸ªCLIå®¡æŸ¥å·¥å…·æ‰èƒ½å·¥ä½œã€‚ä»¥ä¸‹æ˜¯æ¨èå·¥å…·çš„å®‰è£…æ–¹æ³•ï¼š

#### iFlow CLIï¼ˆæ¨èï¼‰

**ç³»ç»Ÿè¦æ±‚**ï¼š
- Node.js 20+
- è‡³å°‘4GBå†…å­˜
- ç¨³å®šçš„ç½‘ç»œè¿æ¥

**å®‰è£…æ–¹æ³•**ï¼š

**macOS/Linux**ï¼š
```bash
# æ–¹å¼1ï¼šè‡ªåŠ¨å®‰è£…è„šæœ¬
bash -c "$(curl -fsSL https://gitee.com/iflow-ai/iflow-cli/raw/main/install.sh)"

# æ–¹å¼2ï¼šNPMå®‰è£…
npm i -g @iflow-ai/iflow-cli@latest
```

**Windows**ï¼š
1. ä» [nodejs.org](https://nodejs.org) ä¸‹è½½å¹¶å®‰è£…Node.js
2. é‡å¯ç»ˆç«¯ï¼ˆæ¨èä½¿ç”¨Windows Terminalï¼‰
3. æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š
```bash
npm install -g @iflow-ai/iflow-cli@latest
```

**éªŒè¯å®‰è£…**ï¼š
```bash
iflow --version
```

**é¦–æ¬¡ä½¿ç”¨**ï¼šè¿è¡Œ `iflow` é€‰æ‹©è®¤è¯æ–¹å¼ï¼ˆiFlowç™»å½•ã€API Keyæˆ–OpenAIå…¼å®¹APIï¼‰

---

#### Codex CLI

```bash
npm install -g @openai/codex
```

#### Claude Code CLI

```bash
npm install -g @anthropic-ai/claude-code
```

---

### åœ¨AIä»£ç†ä¸­é…ç½®ä½¿ç”¨è§„åˆ™

æŸ¥çœ‹æœ¬ä»“åº“çš„ `rules/CLAUDE.md` æ–‡ä»¶å†…å®¹ï¼Œå¹¶å°†å…¶å¤åˆ¶åˆ°ä½ çš„é¡¹ç›®æ ¹ç›®å½•çš„ `CLAUDE.md` æ–‡ä»¶çš„**å¼€å¤´éƒ¨åˆ†**ï¼ˆå¦‚æœåœ¨å®‰è£…MCPæœåŠ¡å™¨æ—¶å·²æ·»åŠ ï¼Œè·³è¿‡æ­¤æ­¥éª¤ï¼‰ã€‚

`CLAUDE.md` åº”åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

```markdown
## ğŸ¤ CLIå·¥å…·äº¤å‰éªŒè¯

**è§¦å‘è¯**ï¼š`ä½¿ç”¨vetéªŒè¯` æˆ– `è®©vetå¸®æˆ‘éªŒè¯` æˆ– `ä½¿ç”¨CLIå·¥å…·äº¤å‰éªŒè¯`

**æ‰§è¡Œæ­¥éª¤**ï¼š
1. è¯»å–è§„åˆ™æ–‡ä»¶ï¼š`rules/rule-agent-file-generator.md`
2. æŒ‰è§„åˆ™ç”ŸæˆReviewIndex.mdå’Œå¤šä¸ªä»»åŠ¡æ–‡ä»¶ï¼ˆUTF-8ç¼–ç ï¼‰
3. è°ƒç”¨MCPå·¥å…·ï¼š`mcp__vet-mediator-mcp__start_review`
   - å¿…éœ€å‚æ•°ï¼š`review_index_path`ã€`draft_paths`ã€`project_root`
   - æ¨èå‚æ•°ï¼š`initiator="Claude Code"`ï¼ˆæ ‡è¯†å‘èµ·å®¡æŸ¥çš„AIå·¥å…·ï¼‰

**æ”¯æŒçš„CLIå·¥å…·**ï¼š
- iFlowï¼ˆé»˜è®¤ï¼‰
- Claude Code
- å…¶ä»–AIä»£ç å®¡æŸ¥å·¥å…·ï¼ˆé€šè¿‡é…ç½®æ–‡ä»¶`.VetMediatorSetting.json`æŒ‡å®šï¼‰

## ğŸ”§ CLIå·¥å…·é…ç½®ç®¡ç†

**è§¦å‘è¯**ï¼š`æŸ¥çœ‹CLIé…ç½®` æˆ– `åˆ‡æ¢CLIå·¥å…·` æˆ– `show cli config`

**åŠŸèƒ½è¯´æ˜**ï¼š
- æ˜¾ç¤ºGUIç•Œé¢æŸ¥çœ‹æ‰€æœ‰é…ç½®çš„CLIå·¥å…·çŠ¶æ€
- å®æ—¶æ£€æŸ¥æ¯ä¸ªå·¥å…·çš„å¥åº·çŠ¶æ€ï¼ˆæ˜¯å¦å·²å®‰è£…ï¼‰
- å…è®¸ç”¨æˆ·ä¸€é”®åˆ‡æ¢å½“å‰æ¿€æ´»çš„CLIå·¥å…·
- æ˜¾ç¤ºé…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå…¨å±€å’Œé¡¹ç›®ï¼‰

**æ‰§è¡Œæ­¥éª¤**ï¼š
è°ƒç”¨MCPå·¥å…·ï¼š`mcp__vet-mediator-mcp__show_cli_config`
- å¿…éœ€å‚æ•°ï¼š`project_root`ï¼ˆé¡¹ç›®æ ¹ç›®å½•è·¯å¾„ï¼‰
```

### é¦–æ¬¡ä½¿ç”¨

1. é‡å¯AIä»£ç†ä»¥åŠ è½½MCPé…ç½®
2. è¾“å…¥è§¦å‘è¯ï¼ˆå¦‚"ä½¿ç”¨vetéªŒè¯"ï¼‰
3. AIä»£ç†è‡ªåŠ¨ç”Ÿæˆä»»åŠ¡æ–‡ä»¶å¹¶è°ƒç”¨MCPå·¥å…·
4. å®æ—¶ç›‘æ§çª—å£æ˜¾ç¤ºå®¡æŸ¥è¿›åº¦
5. æŸ¥çœ‹ç”Ÿæˆçš„å®¡æŸ¥æŠ¥å‘Š

---

## ğŸ“– å·¥ä½œåŸç†

```mermaid
graph TD
    A[AIä»£ç†: ä½¿ç”¨vetéªŒè¯] --> B[AIä»£ç†: ç”ŸæˆReviewIndex.md + Task*.md]
    B --> C[MCPå·¥å…·: åˆ›å»ºsessionç›®å½•]
    C --> D[MCPå·¥å…·: å¤åˆ¶æ–‡ä»¶ & å¯åŠ¨CLIå·¥å…·]
    D --> E[MCPå·¥å…·: å¯åŠ¨GUIç›‘æ§]
    E --> F[CLIå·¥å…·: æ‰§è¡Œå®¡æŸ¥å·¥ä½œæµ]
    F --> G{å®Œæˆæ£€æµ‹}
    G -->|CLIå·¥å…·é€€å‡º| H[MCP: è¯»å–report.md]
    G -->|ç”¨æˆ·ä¸­æ­¢| I[MCP: ç»ˆæ­¢è¿›ç¨‹]
    G -->|è¶…æ—¶| J[MCP: å¼ºåˆ¶ç»ˆæ­¢]
    H --> K[AIä»£ç†: è§£ææŠ¥å‘Š & é‡‡å–è¡ŒåŠ¨]
    I --> K
    J --> K
```

---

## ğŸ“Š å®¡æŸ¥æŠ¥å‘Šæ ¼å¼

CLIå·¥å…·ç”Ÿæˆç»“æ„åŒ–çš„å®¡æŸ¥æŠ¥å‘Šï¼š

```markdown
# Review Report

## Status
approved | major_issues | minor_issues

## Issues Found

### P0 - Critical Issues
- [å…³é”®é—®é¢˜ï¼Œå¸¦æ–‡ä»¶:è¡Œå·å¼•ç”¨]

### P1 - Major Issues
- [é‡è¦é—®é¢˜ï¼Œå¸¦æ–‡ä»¶:è¡Œå·å¼•ç”¨]

### P2 - Minor Issues
- [æ¬¡è¦é—®é¢˜ï¼Œå¸¦æ–‡ä»¶:è¡Œå·å¼•ç”¨]

## Suggestions
- [å¯æ‰§è¡Œçš„æ”¹è¿›å»ºè®®]

## Quality Rubric
| Dimension | Score | Notes |
|-----------|-------|-------|
| Completeness | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Correctness | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Best Practices | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Performance | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Maintainability | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Security | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Backward Compatibility | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |

## Summary
[æ•´ä½“è¯„ä¼°ï¼Œå«æ–‡ä»¶å¼•ç”¨ã€é£é™©å’Œåç»­æ­¥éª¤]
```

---

## ğŸ”§ MCPå·¥å…·è¯´æ˜

### start_review

å¯åŠ¨CLIå·¥å…·å®¡æŸ¥å·¥ä½œæµã€‚

**å‚æ•°**ï¼š
- `review_index_path` (å¿…éœ€): ReviewIndex.mdçš„ä¸´æ—¶æ–‡ä»¶è·¯å¾„
- `draft_paths` (å¿…éœ€): ä»»åŠ¡æ–‡ä»¶è·¯å¾„åˆ—è¡¨
- `project_root` (å¿…éœ€): é¡¹ç›®æ ¹ç›®å½•ç»å¯¹è·¯å¾„
- `initiator` (æ¨è): å‘èµ·å®¡æŸ¥çš„AIå·¥å…·åç§°ï¼ˆå¦‚"Claude Code"ï¼‰
- `max_iterations` (å¯é€‰): æœ€å¤§è¿­ä»£è½®æ¬¡ï¼Œé»˜è®¤3

**è¿”å›**ï¼šåŒ…å«å®¡æŸ¥ç»“æœçš„ç»“æ„åŒ–æŠ¥å‘Š

### show_cli_config

æ˜¾ç¤ºCLIå·¥å…·é…ç½®ç•Œé¢ã€‚

**å‚æ•°**ï¼š
- `project_root` (å¿…éœ€): é¡¹ç›®æ ¹ç›®å½•è·¯å¾„

**åŠŸèƒ½**ï¼š
- æŸ¥çœ‹æ‰€æœ‰é…ç½®çš„CLIå·¥å…·åŠå…¶å¥åº·çŠ¶æ€
- ä¸€é”®åˆ‡æ¢å½“å‰æ¿€æ´»çš„CLIå·¥å…·
- æŸ¥çœ‹é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå…¨å±€å’Œé¡¹ç›®ï¼‰

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### CLIå·¥å…·æœªæ‰¾åˆ°

**ç—‡çŠ¶**ï¼š`[ERROR] CLI Tool not found`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£…å¯¹åº”çš„CLIå·¥å…·
npm install -g @iflow-ai/iflow-cli      # iFlow
npm install -g @openai/codex             # Codex
npm install -g @anthropic-ai/claude-code # Claude

# éªŒè¯å®‰è£…
iflow --version
codex --version
claude --version
```

### å®¡æŸ¥è¶…æ—¶

**ç—‡çŠ¶**ï¼š`[TIMEOUT] Review timed out`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å‡å°‘ä»»åŠ¡æ–‡ä»¶å¤§å°æˆ–æ‹†åˆ†ä¸ºæ›´å°çš„ä»»åŠ¡
2. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶å®šä½é—®é¢˜ï¼š`VetMediatorSessions/session-*/[tool].log`

### GUIçª—å£æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**ï¼š`[UI] Headless environment detected`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- è¿™æ˜¯æ­£å¸¸è¡Œä¸ºï¼Œåœ¨æ— GUIç¯å¢ƒä¸‹è‡ªåŠ¨é™çº§åˆ°CLIæ¨¡å¼
- æ‰€æœ‰åŠŸèƒ½ä¿æŒä¸å˜ï¼Œåªæ˜¯æ²¡æœ‰GUIçª—å£
- å¦‚éœ€GUIï¼Œç¡®ä¿DISPLAYç¯å¢ƒå˜é‡è®¾ç½®æ­£ç¡®ï¼ˆLinuxï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
vet-mediator-mcp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.py                 # MCPæœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ cli_config.py             # CLIå·¥å…·é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ command_builder.py        # CLIå‘½ä»¤æ„å»º
â”‚   â”œâ”€â”€ file_generator.py         # æ–‡ä»¶å¤„ç†å’Œå ä½ç¬¦æ³¨å…¥
â”‚   â”œâ”€â”€ reviewer.py               # CLIå·¥å…·è¿›ç¨‹ç®¡ç†
â”‚   â”œâ”€â”€ workflow_manager.py       # å·¥ä½œæµç¼–æ’
â”‚   â”œâ”€â”€ report_parser.py          # æŠ¥å‘Šè§£æ
â”‚   â”œâ”€â”€ cli_monitor_ui.py         # å®æ—¶ç›‘æ§çª—å£
â”‚   â”œâ”€â”€ cli_check_ui.py           # é…ç½®ç®¡ç†çª—å£
â”‚   â””â”€â”€ encoding_utils.py         # ç¼–ç å¤„ç†
â”œâ”€â”€ rules/
â”‚   â””â”€â”€ rule-agent-file-generator.md  # AIä»£ç†æ–‡ä»¶ç”Ÿæˆè§„åˆ™
â”œâ”€â”€ ../imgs/                         # å·¥ä½œæµç¨‹æˆªå›¾
â”œâ”€â”€ .mcp.json                     # MCPæœåŠ¡å™¨é…ç½®
â”œâ”€â”€ .VetMediatorSetting.json.example  # CLIå·¥å…·é…ç½®ç¤ºä¾‹
â”œâ”€â”€ CLAUDE.md                     # Claude Codeä½¿ç”¨æŒ‡å—
â”œâ”€â”€ pyproject.toml                # é¡¹ç›®é…ç½®
â””â”€â”€ README.md                     # æœ¬æ–‡ä»¶
```

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§LICENSEæ–‡ä»¶

---

## ğŸ†˜ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. åœ¨[GitHub Issues](https://github.com/ldr123/VetMediatorMCP/issues)æäº¤é—®é¢˜

---

**ç‰ˆæœ¬**ï¼š0.0.1
**æœ€åæ›´æ–°**ï¼š2025-11-11
**å…¼å®¹æ€§**ï¼šPython 3.10+, MCP 1.0.0+
