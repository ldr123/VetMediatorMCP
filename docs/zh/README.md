# VetMediator MCP

![Logo](../imgs/icon.png)

**[ğŸ  é¦–é¡µ](../../README.md)** | **Language / è¯­è¨€**: [English](../en/README.md) | [ä¸­æ–‡](../zh/README.md)

---

> **AI CLIå·¥å…·å®¡æŸ¥åè°ƒå™¨** - æ”¯æŒå¤šå·¥å…·ä»£ç å®¡æŸ¥å·¥ä½œæµçš„MCPæœåŠ¡å™¨
>
> è®©AIä»£ç†ï¼ˆå¦‚Claude Codeï¼‰è°ƒç”¨å…¶ä»–CLIå®¡æŸ¥å·¥å…·ï¼ˆå¦‚Codexã€iFlowç­‰ï¼‰è¿›è¡Œä»£ç äº¤å‰éªŒè¯

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¤– **å¤šå·¥å…·æ”¯æŒ** - æ”¯æŒCodexã€Claudeã€iFlowç­‰ä»»æ„CLIå®¡æŸ¥å·¥å…·
- ğŸ”„ **æ™ºèƒ½åè°ƒ** - AIä»£ç†ç”Ÿæˆä»»åŠ¡â†’CLIå·¥å…·å®¡æŸ¥â†’ç»“æ„åŒ–æŠ¥å‘Š
- ğŸ“Š **å®æ—¶ç›‘æ§** - GUIçª—å£æ˜¾ç¤ºå®¡æŸ¥è¿›åº¦å’Œæ—¥å¿—è¾“å‡º
- ğŸ¯ **é…ç½®ç®¡ç†** - GUIç•Œé¢æŸ¥çœ‹å·¥å…·çŠ¶æ€ã€ä¸€é”®åˆ‡æ¢æ¿€æ´»å·¥å…·
- ğŸ“ **ç»“æ„åŒ–æŠ¥å‘Š** - P0/P1/P2é—®é¢˜åˆ†çº§ï¼Œ7ç»´åº¦è´¨é‡è¯„ä¼°
- ğŸŒ **å¤šè¯­è¨€æ”¯æŒ** - UTF-8ç¼–ç ï¼Œæ”¯æŒä¸­æ–‡ã€æ—¥æ–‡ã€emojiç­‰
- ğŸ’¾ **æ™ºèƒ½ç¼“å­˜** - HashéªŒè¯è‡ªåŠ¨ç¼“å­˜è§„åˆ™æ–‡ä»¶ï¼ŒèŠ‚çœTokenæ¶ˆè€—
- ğŸ”§ **è‡ªåŠ¨è¿ç§»** - å…¨å±€é…ç½®è‡ªåŠ¨è¿ç§»åˆ° `~/.vetmediator/` ç›®å½•

---

## ğŸ”Œ MCPå®¢æˆ·ç«¯å…¼å®¹æ€§

**VetMediator MCP** æ˜¯ä¸€ä¸ªæ ‡å‡†çš„MCPï¼ˆModel Context Protocolï¼‰æœåŠ¡å™¨ï¼Œæ”¯æŒæ‰€æœ‰å…¼å®¹MCPåè®®çš„AIå®¢æˆ·ç«¯ï¼š

- âœ… **Claude Code** - Anthropicå®˜æ–¹CLIå·¥å…·
- âœ… **Cursor** - AIä»£ç ç¼–è¾‘å™¨
- âœ… **Codex CLI** - OpenAIä»£ç å·¥å…·
- âœ… å…¶ä»–æ”¯æŒMCPåè®®çš„AIå·¥å…·

**å·¥ä½œåŸç†**ï¼šé€šè¿‡MCPåè®®ï¼Œä»»æ„MCPå®¢æˆ·ç«¯éƒ½å¯ä»¥è°ƒç”¨å…¶ä»–CLIå®¡æŸ¥å·¥å…·ï¼ˆå¦‚Claude Code CLIã€iFlow CLIã€Codex CLIç­‰ï¼‰è¿›è¡Œäº¤å‰éªŒè¯ï¼Œå®ç°"AIå®¡æŸ¥AI"çš„ä»£ç è´¨é‡ä¿éšœã€‚

---

## ğŸ¬ å®Œæ•´å·¥ä½œæµç¨‹

### 1. å‘èµ·å®¡æŸ¥

ç”¨æˆ·é€šè¿‡AIä»£ç†ï¼ˆå¦‚Claude Codeï¼‰è¯·æ±‚ä»£ç å®¡æŸ¥ï¼š

![å‘èµ·å®¡æŸ¥](../imgs/1.png)

*è¾“å…¥è§¦å‘è¯å¦‚"ä½¿ç”¨vetéªŒè¯"ï¼ŒAIä»£ç†å¼€å§‹å‡†å¤‡å®¡æŸ¥ä»»åŠ¡*

### 2. ç”Ÿæˆä»»åŠ¡æ–‡ä»¶

AIä»£ç†æ ¹æ®è§„åˆ™ç”ŸæˆReviewIndex.mdå’Œå¤šä¸ªTask*.mdæ–‡ä»¶ï¼š

![ç”Ÿæˆä»»åŠ¡æ–‡ä»¶](../imgs/3.png)

*åŒ…å«å®Œæ•´çš„ä»»åŠ¡æè¿°ã€ä»£ç å¯¹æ¯”å’Œå®¡æŸ¥è¦æ±‚*

### 3. æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…

ç‚¹å‡»"æŸ¥çœ‹"æŒ‰é’®å¯ä»¥æ‰“å¼€ç”Ÿæˆçš„ä»»åŠ¡æ–‡ä»¶ï¼š

![æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…](../imgs/2.png)

*æ¯æ¬¡å®¡æŸ¥åœ¨VetMediatorSessionsç›®å½•ä¸‹åˆ›å»ºç‹¬ç«‹ä¼šè¯*

### 4. å®æ—¶ç›‘æ§å®¡æŸ¥

MCPå¯åŠ¨CLIå·¥å…·å¹¶æ˜¾ç¤ºå®æ—¶ç›‘æ§çª—å£ï¼š

![å®æ—¶ç›‘æ§](../imgs/4.png)

*800x600çª—å£å®æ—¶æ˜¾ç¤ºå®¡æŸ¥æ—¥å¿—ï¼Œå¯éšæ—¶ä¸­æ­¢*

### 5. ç”Ÿæˆå®¡æŸ¥æŠ¥å‘Š

CLIå·¥å…·å®Œæˆå®¡æŸ¥åç”Ÿæˆç»“æ„åŒ–æŠ¥å‘Šï¼š

![å®¡æŸ¥æŠ¥å‘Š](../imgs/5.png)

*åŒ…å«é—®é¢˜åˆ†çº§ã€å»ºè®®å’Œè´¨é‡è¯„åˆ†*

### 6. å¤„ç†å®¡æŸ¥ç»“æœ

AIä»£ç†è§£ææŠ¥å‘Šå¹¶å†³å®šåç»­åŠ¨ä½œï¼š

![å¤„ç†ç»“æœ](../imgs/6.png)

*æ ¹æ®å®¡æŸ¥ç»“æœé€‰æ‹©ç»§ç»­å®ç°æˆ–ä¿®å¤é—®é¢˜*

---

## ğŸ“š çœŸå®é¡¹ç›®ç¤ºä¾‹

æƒ³çœ‹çœ‹VetMediatoråœ¨çœŸå®é¡¹ç›®ä¸­çš„åº”ç”¨æ•ˆæœï¼Ÿ

ğŸ‘‰ **[æŸ¥çœ‹å®Œæ•´ç¤ºä¾‹ï¼šUnityé¡¹ç›®ä»£ç å®¡æŸ¥](../sample/README.md)**

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†ï¼š
- Claude Codeä½¿ç”¨ultrathinkæ·±åº¦åˆ†æUnityä»£ç 
- ç”Ÿæˆ8ä¸ªè¯¦ç»†çš„é‡æ„ä»»åŠ¡æ–‡ä»¶
- iFlowè¿›è¡Œ310ç§’çš„å…¨é¢å®¡æŸ¥
- å‘ç°å¹¶ä¿®å¤4ä¸ªP0çº§åˆ«å…³é”®BUG
- å®Œæ•´çš„äº¤äº’å¼åé¦ˆæµç¨‹

åŒ…å«18å¼ çœŸå®æˆªå›¾ï¼Œå®Œæ•´å±•ç¤ºä»åˆ†æåˆ°å®¡æŸ¥å®Œæˆçš„å…¨è¿‡ç¨‹ï¼

---

## ğŸ”§ CLIå·¥å…·é…ç½®ç®¡ç†

### æŸ¥çœ‹å·¥å…·çŠ¶æ€

è¾“å…¥"æŸ¥çœ‹CLIå·¥å…·"æ‰“å¼€é…ç½®ç®¡ç†ç•Œé¢ï¼š

![é…ç½®ç®¡ç†ç•Œé¢](../imgs/7.png)

*æŸ¥çœ‹æ‰€æœ‰é…ç½®å·¥å…·çš„å¥åº·çŠ¶æ€å’Œå½“å‰æ¿€æ´»å·¥å…·*

### åˆ‡æ¢CLIå·¥å…·

ç‚¹å‡»å…¶ä»–å·¥å…·çš„"æ¿€æ´»"æŒ‰é’®ï¼š

![æ¿€æ´»æç¤º](../imgs/8.png)

*ç¡®è®¤åç«‹å³ç”Ÿæ•ˆ*

### å®Œæˆåˆ‡æ¢

å·¥å…·åˆ‡æ¢å®Œæˆï¼Œç•Œé¢è‡ªåŠ¨åˆ·æ–°ï¼š

![åˆ‡æ¢å®Œæˆ](../imgs/9.png)

*æ–°å·¥å…·å·²æ¿€æ´»ï¼Œå¯ä»¥ç»§ç»­ç®¡ç†æˆ–å…³é—­çª—å£*

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- **Python 3.10+** - [ä¸‹è½½](https://python.org)
- **uvx** - PythonåŒ…è¿è¡Œå™¨ï¼ˆéšuvä¸€èµ·å®‰è£…ï¼‰ï¼š`pip install uv`
- **MCPå…¼å®¹çš„AIä»£ç†** - å¦‚Claude Codeã€Cursorç­‰
- **CLIå®¡æŸ¥å·¥å…·** - å¦‚iFlowã€Codexæˆ–Claude CLIï¼ˆè‡³å°‘å®‰è£…ä¸€ä¸ªï¼‰

### ä¸€é”®å®‰è£…ï¼ˆæ¨èï¼‰

ğŸ‘‰ **[3åˆ†é’Ÿå¿«é€Ÿå¼€å§‹æŒ‡å—](../QUICKSTART.md)**

ä½¿ç”¨è‡ªåŠ¨åŒ–å®‰è£…è„šæœ¬å®Œæˆæ‰€æœ‰é…ç½®ï¼š

```bash
curl -sSL https://raw.githubusercontent.com/ldr123/VetMediatorMCP/master/install.sh | bash
```

**è„šæœ¬è‡ªåŠ¨å®Œæˆ**ï¼š
- âœ… ä¾èµ–æ£€æŸ¥ï¼ˆPython 3.10+ã€uvxï¼‰
- âœ… ç”Ÿæˆ `.mcp.json` é…ç½®æ–‡ä»¶
- âœ… æ£€æµ‹å·²å®‰è£…çš„CLIå·¥å…·
- âœ… æ³¨å…¥ä½¿ç”¨è§„åˆ™åˆ° `CLAUDE.md`
- âœ… åˆ›å»º `VetMediatorSessions/` ç›®å½•

**éªŒè¯å®‰è£…**ï¼š
```bash
./verify-config.sh
```

### æ‰‹åŠ¨å®‰è£…ï¼ˆå¼€å‘è€…ï¼‰

å…‹éš†ä»“åº“åï¼Œåœ¨ `.mcp.json` ä¸­é…ç½®æœ¬åœ°è·¯å¾„ï¼š

```json
{
  "mcpServers": {
    "vet-mediator-mcp": {
      "command": "uv",
      "args": [
        "--directory",
        "/path/to/VetMediatorMCP",
        "run",
        "vet-mediator-mcp"
      ]
    }
  }
}
```

### é¦–æ¬¡ä½¿ç”¨

1. é‡å¯AIå·¥å…·ï¼ˆClaude Code / Cursorç­‰ï¼‰ä»¥åŠ è½½MCPé…ç½®
2. è¾“å…¥è§¦å‘è¯ï¼š`ä½¿ç”¨vetéªŒè¯` æˆ– `use vet validation`
3. AIå·¥å…·è‡ªåŠ¨ç”Ÿæˆä»»åŠ¡æ–‡ä»¶å¹¶è°ƒç”¨MCPå·¥å…·
4. å®æ—¶ç›‘æ§çª—å£æ˜¾ç¤ºå®¡æŸ¥è¿›åº¦
5. æŸ¥çœ‹ç”Ÿæˆçš„å®¡æŸ¥æŠ¥å‘Š

---

## ğŸ“– å·¥ä½œåŸç†

```mermaid
graph TD
    A[AIä»£ç†: ä½¿ç”¨vetéªŒè¯] --> B[AIä»£ç†: ç”ŸæˆReviewIndex.md + Task*.md]
    B --> C[MCPå·¥å…·: åˆ›å»ºsessionç›®å½•]
    C --> D[MCPå·¥å…·: å¤åˆ¶æ–‡ä»¶ & å¯åŠ¨CLIå·¥å…·]
    D --> E[MCPå·¥å…·: å¯åŠ¨GUIç›‘æ§]
    E --> F[CLIå·¥å…·: æ‰§è¡Œå®¡æŸ¥å·¥ä½œæµ]
    F --> G{å®Œæˆæ£€æµ‹}
    G -->|CLIå·¥å…·é€€å‡º| H[MCP: è¯»å–report.md]
    G -->|ç”¨æˆ·ä¸­æ­¢| I[MCP: ç»ˆæ­¢è¿›ç¨‹]
    G -->|è¶…æ—¶| J[MCP: å¼ºåˆ¶ç»ˆæ­¢]
    H --> K[AIä»£ç†: è§£ææŠ¥å‘Š & é‡‡å–è¡ŒåŠ¨]
    I --> K
    J --> K
```

---

## ğŸ“Š å®¡æŸ¥æŠ¥å‘Šæ ¼å¼

CLIå·¥å…·ç”Ÿæˆç»“æ„åŒ–çš„å®¡æŸ¥æŠ¥å‘Šï¼š

```markdown
# Review Report

## Status
approved | major_issues | minor_issues

## Issues Found

### P0 - Critical Issues
- [å…³é”®é—®é¢˜ï¼Œå¸¦æ–‡ä»¶:è¡Œå·å¼•ç”¨]

### P1 - Major Issues
- [é‡è¦é—®é¢˜ï¼Œå¸¦æ–‡ä»¶:è¡Œå·å¼•ç”¨]

### P2 - Minor Issues
- [æ¬¡è¦é—®é¢˜ï¼Œå¸¦æ–‡ä»¶:è¡Œå·å¼•ç”¨]

## Suggestions
- [å¯æ‰§è¡Œçš„æ”¹è¿›å»ºè®®]

## Quality Rubric
| Dimension | Score | Notes |
|-----------|-------|-------|
| Completeness | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Correctness | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Best Practices | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Performance | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Maintainability | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Security | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |
| Backward Compatibility | Pass/Minor/Major/Critical | éPassæ—¶çš„è¯´æ˜ |

## Summary
[æ•´ä½“è¯„ä¼°ï¼Œå«æ–‡ä»¶å¼•ç”¨ã€é£é™©å’Œåç»­æ­¥éª¤]
```

---

## ğŸ”§ MCPå·¥å…·è¯´æ˜

### start_review

å¯åŠ¨CLIå·¥å…·å®¡æŸ¥å·¥ä½œæµã€‚

**å‚æ•°**ï¼š
- `review_index_path` (å¿…éœ€): ReviewIndex.mdçš„ä¸´æ—¶æ–‡ä»¶è·¯å¾„
- `draft_paths` (å¿…éœ€): ä»»åŠ¡æ–‡ä»¶è·¯å¾„åˆ—è¡¨
- `project_root` (å¿…éœ€): é¡¹ç›®æ ¹ç›®å½•ç»å¯¹è·¯å¾„
- `initiator` (æ¨è): å‘èµ·å®¡æŸ¥çš„AIå·¥å…·åç§°ï¼ˆå¦‚"Claude Code"ï¼‰
- `max_iterations` (å¯é€‰): æœ€å¤§è¿­ä»£è½®æ¬¡ï¼Œé»˜è®¤3

**è¿”å›**ï¼šåŒ…å«å®¡æŸ¥ç»“æœçš„ç»“æ„åŒ–æŠ¥å‘Š

### show_cli_config

æ˜¾ç¤ºCLIå·¥å…·é…ç½®ç•Œé¢ã€‚

**å‚æ•°**ï¼š
- `project_root` (å¿…éœ€): é¡¹ç›®æ ¹ç›®å½•è·¯å¾„

**åŠŸèƒ½**ï¼š
- æŸ¥çœ‹æ‰€æœ‰é…ç½®çš„CLIå·¥å…·åŠå…¶å¥åº·çŠ¶æ€
- ä¸€é”®åˆ‡æ¢å½“å‰æ¿€æ´»çš„CLIå·¥å…·
- æŸ¥çœ‹é…ç½®æ–‡ä»¶è·¯å¾„ï¼ˆå…¨å±€å’Œé¡¹ç›®ï¼‰

### get_review_rule_hash

è·å–å®¡æŸ¥è§„åˆ™æ–‡ä»¶çš„SHA-256 hashå€¼ï¼ˆå‰12ä½ï¼‰ï¼Œç”¨äºæœ¬åœ°ç¼“å­˜ç‰ˆæœ¬æ£€æµ‹ã€‚

**å‚æ•°**ï¼š
- `rule_type` (å¯é€‰): è§„åˆ™ç±»å‹ï¼Œé»˜è®¤ "file-generator"

**è¿”å›**ï¼š
```json
{
  "rule_type": "file-generator",
  "hash": "a1b2c3d4e5f6",
  "description": "Rule file hash for cache validation"
}
```

**ç”¨é€”**ï¼š
- AIä»£ç†å¯ä»¥é€šè¿‡hashåˆ¤æ–­æœ¬åœ°ç¼“å­˜çš„è§„åˆ™æ–‡ä»¶æ˜¯å¦æ˜¯æœ€æ–°ç‰ˆæœ¬
- é¿å…æ¯æ¬¡éƒ½é‡æ–°ä¸‹è½½è§„åˆ™æ–‡ä»¶ï¼ŒèŠ‚çœTokenæ¶ˆè€—

### update_review_rules

æ›´æ–°å®¡æŸ¥è§„åˆ™æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•ã€‚

**å‚æ•°**ï¼š
- `dst_path` (å¿…éœ€): å®Œæ•´ç›®æ ‡è·¯å¾„ï¼ˆå¦‚ `/path/to/project/VetMediatorSessions`ï¼‰
- `rule_type` (å¯é€‰): è§„åˆ™ç±»å‹ï¼Œé»˜è®¤ "file-generator"

**åŠŸèƒ½**ï¼š
- MCPæœåŠ¡å™¨ä¼šè‡ªåŠ¨åˆ é™¤æ—§çš„è§„åˆ™ç¼“å­˜æ–‡ä»¶
- å†™å…¥æœ€æ–°ç‰ˆæœ¬çš„è§„åˆ™æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•
- è§„åˆ™æ–‡æ¡£åŒ…å«ï¼šæ–‡ä»¶æ ¼å¼è§„èŒƒã€æ¨¡æ¿ã€ç¤ºä¾‹ã€MCPè°ƒç”¨è¯´æ˜ç­‰

**è¿”å›**ï¼š
```json
{
  "status": "success",
  "rule_file_path": "/path/to/project/VetMediatorSessions/vet_mediator_rule_a1b2c3d4e5f6.md",
  "hash": "a1b2c3d4e5f6",
  "message": "è§„åˆ™æ–‡ä»¶å·²æ›´æ–°"
}
```

---

## ğŸ”§ é«˜çº§é…ç½®

### ä¸¤é˜¶æ®µå®¡æŸ¥æ¨¡å¼

VetMediator æ”¯æŒä¸¤é˜¶æ®µå®¡æŸ¥ï¼š**ç¬¬ä¸€é˜¶æ®µ**å®¡æŸ¥ä»»åŠ¡è§„åˆ’ï¼Œ**ç¬¬äºŒé˜¶æ®µ**å®¡æŸ¥ä»£ç å®ç°ã€‚

**å¯ç”¨æ–¹æ³•**ï¼š

åœ¨è°ƒç”¨ `start_review` æ—¶æä¾› `original_requirement_path` å’Œ `task_planning_path` å‚æ•°ï¼š

```python
mcp__vet-mediator-mcp__start_review(
    review_index_path="...",
    draft_paths=["..."],
    project_root="...",
    original_requirement_path="/path/to/OriginalRequirement.md",  # åŸå§‹éœ€æ±‚
    task_planning_path="/path/to/TaskPlanning.md"                  # ä»»åŠ¡è§„åˆ’
)
```

**å·¥ä½œæµç¨‹**ï¼š
1. CLIå·¥å…·å…ˆå®¡æŸ¥ä»»åŠ¡è§„åˆ’æ˜¯å¦åˆç†ï¼ˆä¸åŸå§‹éœ€æ±‚å¯¹æ¯”ï¼‰
2. å¦‚æœè§„åˆ’é€šè¿‡ï¼Œå†å®¡æŸ¥å…·ä½“çš„ä»£ç å®ç°
3. ä¸¤æ¬¡å®¡æŸ¥ç»“æœéƒ½ä¼šåŒ…å«åœ¨æœ€ç»ˆæŠ¥å‘Šä¸­

**é€‚ç”¨åœºæ™¯**ï¼š
- å¤æ‚åŠŸèƒ½å¼€å‘ï¼Œéœ€è¦å…ˆè§„åˆ’åå®ç°
- å›¢é˜Ÿåä½œï¼Œéœ€è¦å…ˆå®¡æŸ¥è®¾è®¡å†å®¡æŸ¥ä»£ç 
- é«˜è´¨é‡è¦æ±‚ï¼ŒåŒé‡ä¿éšœä»£ç è´¨é‡

### è‡ªå®šä¹‰CLIå·¥å…·é…ç½®

é»˜è®¤æƒ…å†µä¸‹ï¼ŒVetMediator ä¼šè‡ªåŠ¨æ£€æµ‹å·²å®‰è£…çš„CLIå·¥å…·ã€‚ä½ ä¹Ÿå¯ä»¥æ‰‹åŠ¨é…ç½®ï¼š

**é¡¹ç›®çº§é…ç½®**ï¼ˆä¼˜å…ˆçº§é«˜ï¼‰ï¼š

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.VetMediatorSetting.json`ï¼š

```json
{
  "tools": [
    {
      "name": "iflow",
      "executable": "iflow",
      "enabled": true
    },
    {
      "name": "codex",
      "executable": "codex",
      "args": ["--custom-arg"],
      "enabled": false
    }
  ],
  "active_tool": "iflow"
}
```

**å…¨å±€é…ç½®**ï¼ˆä½ä¼˜å…ˆçº§ï¼‰ï¼š

é…ç½®æ–‡ä»¶ä½ç½®ï¼š`~/.vetmediator/config.json`

æ ¼å¼åŒé¡¹ç›®çº§é…ç½®ã€‚

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

**1. è§„åˆ™æ–‡ä»¶ç¼“å­˜**

è§„åˆ™æ–‡ä»¶ä¼šè‡ªåŠ¨ç¼“å­˜åˆ° `VetMediatorSessions/` ç›®å½•ï¼š
- æ–‡ä»¶åæ ¼å¼ï¼š`vet_mediator_rule_{hash}.md`
- æ¯æ¬¡å®¡æŸ¥å‰ä¼šè‡ªåŠ¨æ£€æŸ¥hashï¼Œåªåœ¨ç‰ˆæœ¬å˜åŒ–æ—¶é‡æ–°ä¸‹è½½
- å»ºè®®å°† `VetMediatorSessions/vet_mediator_rule_*.md` åŠ å…¥ç‰ˆæœ¬æ§åˆ¶ï¼ˆå¯é€‰ï¼‰

**2. ä»»åŠ¡æ–‡ä»¶å¤§å°æ§åˆ¶**

ä¸ºäº†è·å¾—æœ€ä½³æ€§èƒ½ï¼š
- å•ä¸ªä»»åŠ¡æ–‡ä»¶å»ºè®®ä¸è¶…è¿‡ 1000 è¡Œä»£ç 
- å¤æ‚åŠŸèƒ½å»ºè®®æ‹†åˆ†ä¸ºå¤šä¸ªä»»åŠ¡æ–‡ä»¶
- ä½¿ç”¨ `draft_paths` å‚æ•°æŒ‰é¡ºåºæäº¤å¤šä¸ªä»»åŠ¡

**3. å¹¶å‘å®¡æŸ¥é™åˆ¶**

- é»˜è®¤æƒ…å†µä¸‹ï¼ŒVetMediator ä¸€æ¬¡åªå¤„ç†ä¸€ä¸ªå®¡æŸ¥ä»»åŠ¡
- å¦‚éœ€å¹¶å‘ï¼Œå¯ä»¥åœ¨ä¸åŒé¡¹ç›®ç›®å½•ä¸­å¯åŠ¨å¤šä¸ªå®¡æŸ¥
- æ³¨æ„CLIå·¥å…·çš„APIè°ƒç”¨é™åˆ¶

---

## ğŸ› ï¸ æ•…éšœæ’é™¤

### CLIå·¥å…·æœªæ‰¾åˆ°

**ç—‡çŠ¶**ï¼š`[ERROR] CLI Tool not found`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# å®‰è£…å¯¹åº”çš„CLIå·¥å…·
npm install -g @iflow-ai/iflow-cli      # iFlow
npm install -g @openai/codex             # Codex
npm install -g @anthropic-ai/claude-code # Claude

# éªŒè¯å®‰è£…
iflow --version
codex --version
claude --version
```

### å®¡æŸ¥è¶…æ—¶

**ç—‡çŠ¶**ï¼š`[TIMEOUT] Review timed out`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. å‡å°‘ä»»åŠ¡æ–‡ä»¶å¤§å°æˆ–æ‹†åˆ†ä¸ºæ›´å°çš„ä»»åŠ¡
2. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶å®šä½é—®é¢˜ï¼š`VetMediatorSessions/session-*/[tool].log`

### GUIçª—å£æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**ï¼š`[UI] Headless environment detected`

**è§£å†³æ–¹æ¡ˆ**ï¼š
- è¿™æ˜¯æ­£å¸¸è¡Œä¸ºï¼Œåœ¨æ— GUIç¯å¢ƒä¸‹è‡ªåŠ¨é™çº§åˆ°CLIæ¨¡å¼
- æ‰€æœ‰åŠŸèƒ½ä¿æŒä¸å˜ï¼Œåªæ˜¯æ²¡æœ‰GUIçª—å£
- å¦‚éœ€GUIï¼Œç¡®ä¿DISPLAYç¯å¢ƒå˜é‡è®¾ç½®æ­£ç¡®ï¼ˆLinuxï¼‰

### è§„åˆ™æ–‡ä»¶ä¸‹è½½å¤±è´¥

**ç—‡çŠ¶**ï¼š`[ERROR] Failed to download rule file`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. æ£€æŸ¥ç½‘ç»œè¿æ¥
curl -I https://raw.githubusercontent.com/ldr123/VetMediatorMCP/master/rules/CLAUDE.md

# 2. æ‰‹åŠ¨ä¸‹è½½è§„åˆ™æ–‡ä»¶
cd VetMediatorSessions
wget https://raw.githubusercontent.com/ldr123/VetMediatorMCP/master/rules/rule-agent-file-generator.md
# é‡å‘½åä¸º vet_mediator_rule_{hash}.md

# 3. ä¸­å›½ç”¨æˆ·ä½¿ç”¨Giteeé•œåƒ
# curl -O https://gitee.com/ldr123/VetMediatorMCP/raw/master/rules/rule-agent-file-generator.md
```

### VetMediatorSessions ç›®å½•æƒé™é—®é¢˜

**ç—‡çŠ¶**ï¼š`[ERROR] Permission denied: VetMediatorSessions/`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# æ£€æŸ¥ç›®å½•æƒé™
ls -la VetMediatorSessions/

# ä¿®å¤æƒé™ï¼ˆLinux/macOSï¼‰
chmod 755 VetMediatorSessions/
chmod 644 VetMediatorSessions/*

# Windowsï¼ˆGit Bashï¼‰
# å³é”®ç‚¹å‡»ç›®å½• -> å±æ€§ -> å®‰å…¨ -> ç¼–è¾‘æƒé™
```

### MCPå·¥å…·è°ƒç”¨å¤±è´¥

**ç—‡çŠ¶**ï¼š`Tool 'vet-mediator-mcp' not found`

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `.mcp.json` é…ç½®æ˜¯å¦æ­£ç¡®
2. é‡å¯AIå·¥å…·ï¼ˆClaude Code / Cursorï¼‰
3. è¿è¡ŒéªŒè¯è„šæœ¬ï¼š`./verify-config.sh`
4. æ£€æŸ¥ uvx æ˜¯å¦æ­£ç¡®å®‰è£…ï¼š`uvx --version`

### Python ç‰ˆæœ¬è¿‡ä½

**ç—‡çŠ¶**ï¼š`Python 3.10+ required, but found Python 3.9`

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# macOS (ä½¿ç”¨Homebrew)
brew install python@3.10

# Ubuntu/Debian
sudo apt update
sudo apt install python3.10

# Windows
# ä» https://python.org ä¸‹è½½å¹¶å®‰è£… Python 3.10+

# éªŒè¯å®‰è£…
python3 --version
```

### å®¡æŸ¥æŠ¥å‘Šæ ¼å¼é”™è¯¯

**ç—‡çŠ¶**ï¼šCLIå·¥å…·ç”Ÿæˆçš„æŠ¥å‘Šæ— æ³•è§£æ

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥CLIå·¥å…·ç‰ˆæœ¬æ˜¯å¦æœ€æ–°ï¼š`iflow --version`
2. æŸ¥çœ‹åŸå§‹æŠ¥å‘Šæ–‡ä»¶ï¼š`VetMediatorSessions/session-*/Report.md`
3. ç¡®è®¤CLIå·¥å…·é…ç½®æ­£ç¡®ï¼ˆAPIå¯†é’¥ç­‰ï¼‰
4. å°è¯•åˆ‡æ¢åˆ°å…¶ä»–CLIå·¥å…·

### è¯Šæ–­å‘½ä»¤é›†åˆ

**æ”¶é›†è¯Šæ–­ä¿¡æ¯**ï¼š
```bash
# è¿è¡Œæ—¥å¿—æ”¶é›†è„šæœ¬
./collect-logs.sh

# æˆ–æ‰‹åŠ¨æ”¶é›†
echo "=== ç³»ç»Ÿä¿¡æ¯ ===" > debug.log
uname -a >> debug.log
python3 --version >> debug.log
uvx --version >> debug.log

echo "=== é…ç½®æ–‡ä»¶ ===" >> debug.log
cat .mcp.json >> debug.log

echo "=== CLIå·¥å…· ===" >> debug.log
iflow --version >> debug.log 2>&1 || echo "iFlow: not installed" >> debug.log
codex --version >> debug.log 2>&1 || echo "Codex: not installed" >> debug.log

echo "=== æœ€è¿‘é”™è¯¯ ===" >> debug.log
grep -r "ERROR" VetMediatorSessions/ | tail -n 20 >> debug.log

# å°† debug.log é™„åŠ åˆ° GitHub Issue
```

**å¿«é€Ÿè¯Šæ–­**ï¼š
```bash
# è¿è¡ŒéªŒè¯è„šæœ¬
./verify-config.sh

# æ£€æŸ¥å…·ä½“é¡¹ç›®
python3 -c "import sys; print(f'Python {sys.version}')"
uvx --version
ls -la .mcp.json
ls -la VetMediatorSessions/
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
vet-mediator-mcp/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server.py                 # MCPæœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ cli_config.py             # CLIå·¥å…·é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ command_builder.py        # CLIå‘½ä»¤æ„å»º
â”‚   â”œâ”€â”€ file_generator.py         # æ–‡ä»¶å¤„ç†å’Œå ä½ç¬¦æ³¨å…¥
â”‚   â”œâ”€â”€ reviewer.py               # CLIå·¥å…·è¿›ç¨‹ç®¡ç†
â”‚   â”œâ”€â”€ workflow_manager.py       # å·¥ä½œæµç¼–æ’
â”‚   â”œâ”€â”€ report_parser.py          # æŠ¥å‘Šè§£æ
â”‚   â”œâ”€â”€ cli_monitor_ui.py         # å®æ—¶ç›‘æ§çª—å£
â”‚   â”œâ”€â”€ cli_check_ui.py           # é…ç½®ç®¡ç†çª—å£
â”‚   â””â”€â”€ encoding_utils.py         # ç¼–ç å¤„ç†
â”œâ”€â”€ rules/
â”‚   â””â”€â”€ rule-agent-file-generator.md  # AIä»£ç†æ–‡ä»¶ç”Ÿæˆè§„åˆ™
â”œâ”€â”€ ../imgs/                         # å·¥ä½œæµç¨‹æˆªå›¾
â”œâ”€â”€ .mcp.json                     # MCPæœåŠ¡å™¨é…ç½®
â”œâ”€â”€ .VetMediatorSetting.json.example  # CLIå·¥å…·é…ç½®ç¤ºä¾‹
â”œâ”€â”€ CLAUDE.md                     # Claude Codeä½¿ç”¨æŒ‡å—
â”œâ”€â”€ pyproject.toml                # é¡¹ç›®é…ç½®
â””â”€â”€ README.md                     # æœ¬æ–‡ä»¶
```

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§LICENSEæ–‡ä»¶

---

## ğŸ†˜ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
2. åœ¨[GitHub Issues](https://github.com/ldr123/VetMediatorMCP/issues)æäº¤é—®é¢˜

---

**ç‰ˆæœ¬**ï¼š2.1.0
**æœ€åæ›´æ–°**ï¼š2025-11-13
**å…¼å®¹æ€§**ï¼šPython 3.10+, MCP 1.0.0+
